<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Energy Consumption Dashboard</title>
    <link href="https://cdn.jsdelivr.net/npm/daisyui@4.12.10/dist/full.min.css" rel="stylesheet" type="text/css" />
    <script src="https://cdn.tailwindcss.com?plugins=typography"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/lottie-web/5.7.4/lottie.min.js"></script>
    <script type="module">
      import * as d3 from "https://cdn.jsdelivr.net/npm/d3@7/+esm";
      
      function clean_csv(data){
        for (let i = 0; i < data.length; i++){
          data[i].Date = new Date(data[i].Date)
          data[i].KWH = parseFloat(data[i].KWH)
          data[i].Therms = parseFloat(data[i].Therms)
        }
      }

      let mvhs_json = await d3.csv('./data_files/mvhs.csv')
      let lhs_json = await d3.csv('./data_files/lhs.csv')
      let hhs_json = await d3.csv('./data_files/hhs.csv')
      
      mvhs_json = clean_csv(mvhs_json)
      lhs_json = clean_csv(lhs_json)
      hhs_json = clean_csv(hhs_json)

      console.log(hhs_json)

      function calculate_totals(input_json){
        let kwh_sum = d3.sum(input_json, function(d){
          return d.KWH
        })
        console.log(kwh_sum)
        let therm_sum = d3.sum(input_json, function(d){
          return d.Therms
        })
        console.log(therm_sum)
      }
      calculate_totals(mvhs_json)
      calculate_totals(lhs_json)
      calculate_totals(hhs_json)
    </script>
</head>
<body>
<!--NAVBAR-->
<div class="navbar text-sky-600">
    <a class="btn btn-ghost text-2xl font-bold" href="./index.html">FUHSD Sustainability</a>
     <ul tabindex="0" class="menu menu-horizontal m-auto inline-flex">
         <li class="font-semibold"><a href="./co2.html">CO<sub>2</sub>e emissions</a></li>
         <li class="font-semibold"><a href="./usage.html">Energy use breakdown</a></li>
         <li class="font-semibold"><a href="./thermometer.html">HVAC simulation</a></li>
         <div class="badge badge-outline">more features coming soon!</div>
     </ul>
   </div> 
 <!--END NAVBAR-->
<div id="landing-stats" class="space-y-20 my-12">
    <div class="flex flex-row mx-auto">
            <div class="w-1/4 mx-auto my-auto" id="stat-and-description">
            <div class="mb-8">
                    <h2 class="text-7xl font-bold text-blue-500 mx-auto">100.4mt</h2>
                    <p class="text-md text-slate-600 mx-2">Amount of CO2e produced by FUHSD in the past year, calculated from energy bill data</p>
            </div>
                <p class="text-xl text-slate-600 my-3">Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. </p>
                <a class="text-2xl font-bold underline mt-2" href="./co2.html">Learn more</a>
            </div>
            <div class="w-7/12 mx-auto">
                <canvas id="myChart"></canvas>
            </div>
        </div>

        <div class="flex flex-row mx-auto">
            <div class="w-7/12 mx-auto">
                <canvas id="energyBarChart"></canvas>
            </div>
            <div class="w-1/3 mx-auto my-auto" id="co2-stat">
                <h2 class="text-5xl font-bold mx-auto mb-4">Where does our energy come from?</h2>
                <p class="text-xl text-slate-600 my-3">Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. </p>
                <a class="text-2xl font-bold underline mt-2" href="./co2.html">Learn more</a>
            </div>
        </div>
</div>

<footer class="footer bg-base-200 text-base-content p-10">
    <aside>
      <svg
        width="50"
        height="50"
        viewBox="0 0 24 24"
        xmlns="http://www.w3.org/2000/svg"
        fill-rule="evenodd"
        clip-rule="evenodd"
        class="fill-current">
        <path
          d="M22.672 15.226l-2.432.811.841 2.515c.33 1.019-.209 2.127-1.23 2.456-1.15.325-2.148-.321-2.463-1.226l-.84-2.518-5.013 1.677.84 2.517c.391 1.203-.434 2.542-1.831 2.542-.88 0-1.601-.564-1.86-1.314l-.842-2.516-2.431.809c-1.135.328-2.145-.317-2.463-1.229-.329-1.018.211-2.127 1.231-2.456l2.432-.809-1.621-4.823-2.432.808c-1.355.384-2.558-.59-2.558-1.839 0-.817.509-1.582 1.327-1.846l2.433-.809-.842-2.515c-.33-1.02.211-2.129 1.232-2.458 1.02-.329 2.13.209 2.461 1.229l.842 2.515 5.011-1.677-.839-2.517c-.403-1.238.484-2.553 1.843-2.553.819 0 1.585.509 1.85 1.326l.841 2.517 2.431-.81c1.02-.33 2.131.211 2.461 1.229.332 1.018-.21 2.126-1.23 2.456l-2.433.809 1.622 4.823 2.433-.809c1.242-.401 2.557.484 2.557 1.838 0 .819-.51 1.583-1.328 1.847m-8.992-6.428l-5.01 1.675 1.619 4.828 5.011-1.674-1.62-4.829z"></path>
      </svg>
      <p>
        ACME Industries Ltd.
        <br />
        Providing reliable tech since 1992
      </p>
    </aside>
    <nav>
      <h6 class="footer-title">Services</h6>
      <a class="link link-hover">Branding</a>
      <a class="link link-hover">Design</a>
      <a class="link link-hover">Marketing</a>
      <a class="link link-hover">Advertisement</a>
    </nav>
    <nav>
      <h6 class="footer-title">Company</h6>
      <a class="link link-hover">About us</a>
      <a class="link link-hover">Contact</a>
      <a class="link link-hover">Jobs</a>
      <a class="link link-hover">Press kit</a>
    </nav>
    <nav>
      <h6 class="footer-title">Legal</h6>
      <a class="link link-hover">Terms of use</a>
      <a class="link link-hover">Privacy policy</a>
      <a class="link link-hover">Cookie policy</a>
    </nav>
  </footer>
    <script src="js/homepage.js"></script>
</body>
</html>
